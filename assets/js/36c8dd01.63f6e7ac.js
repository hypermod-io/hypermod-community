"use strict";(self.webpackChunkcodeshift_community=self.webpackChunkcodeshift_community||[]).push([[5761],{3905:function(e,n,t){t.d(n,{Zo:function(){return m},kt:function(){return f}});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=o.createContext({}),c=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},m=function(e){var n=c(e.components);return o.createElement(s.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=c(t),d=r,f=p["".concat(s,".").concat(d)]||p[d]||u[d]||i;return t?o.createElement(f,a(a({ref:n},m),{},{components:t})):o.createElement(f,a({ref:n},m))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,a=new Array(i);a[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[p]="string"==typeof e?e:r,a[1]=l;for(var c=2;c<i;c++)a[c]=t[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},1806:function(e,n,t){t.r(n),t.d(n,{assets:function(){return s},contentTitle:function(){return a},default:function(){return u},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return c}});var o=t(3117),r=(t(7294),t(3905));const i={id:"consuming",title:"Consuming",slug:"/consuming",description:"Learn how to consume codemods. This page covers the different ways you can use codemods to automatically refactor your codebase, including integrating them into your development workflow and running them from the command line.",keywords:["codemod","consuming","refactor","codebase","development workflow","command line"]},a=void 0,l={unversionedId:"consuming",id:"consuming",title:"Consuming",description:"Learn how to consume codemods. This page covers the different ways you can use codemods to automatically refactor your codebase, including integrating them into your development workflow and running them from the command line.",source:"@site/docs/consuming.mdx",sourceDirName:".",slug:"/consuming",permalink:"/docs/consuming",draft:!1,editUrl:"https://github.com/hypermod-io/hypermod-community/edit/main/website/docs/consuming.mdx",tags:[],version:"current",frontMatter:{id:"consuming",title:"Consuming",slug:"/consuming",description:"Learn how to consume codemods. This page covers the different ways you can use codemods to automatically refactor your codebase, including integrating them into your development workflow and running them from the command line.",keywords:["codemod","consuming","refactor","codebase","development workflow","command line"]},sidebar:"docs",previous:{title:"Authoring",permalink:"/docs/authoring"},next:{title:"Configuration",permalink:"/docs/configuration"}},s={},c=[{value:"How to run Community codemods",id:"how-to-run-community-codemods",level:2},{value:"Run codemods in sequence",id:"run-codemods-in-sequence",level:2},{value:"Running local transforms",id:"running-local-transforms",level:2},{value:"Parsing TypeScript &amp; Flow",id:"parsing-typescript--flow",level:2}],m={toc:c},p="wrapper";function u(e){let{components:n,...t}=e;return(0,r.kt)(p,(0,o.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Running codemods is made simple through our CLI tool, ",(0,r.kt)("a",{parentName:"p",href:"/docs/cli"},"@hypermod/cli"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"@hypermod/cli is responsible for running the provided transform against your entire codebase. Under the hood, it is a wrapper of jscodeshift's cli, which provides additional functionality")),(0,r.kt)("p",null,"For usage please refer to the ",(0,r.kt)("a",{parentName:"p",href:"/docs/cli"},"@hypermod/cli API reference"),"."),(0,r.kt)("h2",{id:"how-to-run-community-codemods"},"How to run Community codemods"),(0,r.kt)("p",null,"To run a hypermod package, install and use the ",(0,r.kt)("inlineCode",{parentName:"p"},"@hypermod/cli"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"npm:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"npm install -g @hypermod/cli")," or"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"yarn:")," ",(0,r.kt)("inlineCode",{parentName:"li"},"yarn global add @hypermod/cli"))),(0,r.kt)("p",null,"For example, say we want to run transforms for ",(0,r.kt)("inlineCode",{parentName:"p"},"@mylib/button")," and migrate from version 13 to the latest version 14, we could run the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"codemod-cli --packages @mylib/button@14.0.0 project/path/to/src\n")),(0,r.kt)("p",null,"The following sequence of events will follow:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"@hypermod/cli")," will then attempt to download a Hypermod package for the ",(0,r.kt)("inlineCode",{parentName:"li"},"@mylib/button")," package matching version ",(0,r.kt)("inlineCode",{parentName:"li"},"14.0.0")),(0,r.kt)("li",{parentName:"ol"},"Download the package from NPM"),(0,r.kt)("li",{parentName:"ol"},"Locate the ",(0,r.kt)("inlineCode",{parentName:"li"},"hypermod.config.js")),(0,r.kt)("li",{parentName:"ol"},"Attempt to find a ",(0,r.kt)("inlineCode",{parentName:"li"},"transform")," for ",(0,r.kt)("inlineCode",{parentName:"li"},"14.0.0")),(0,r.kt)("li",{parentName:"ol"},"Run the transform against the path ",(0,r.kt)("inlineCode",{parentName:"li"},"project/path/to/src"))),(0,r.kt)("h2",{id:"run-codemods-in-sequence"},"Run codemods in sequence"),(0,r.kt)("p",null,"It's also possible to run a series of codemods, one after the other, to migrate your usage of ",(0,r.kt)("inlineCode",{parentName:"p"},"@mylib/button")," across multiple major versions, from say v14, v15 and finally v16. Assuming codemods for those versions exist."),(0,r.kt)("p",null,"This is done my providing the ",(0,r.kt)("inlineCode",{parentName:"p"},"--sequence")," (or ",(0,r.kt)("inlineCode",{parentName:"p"},"-s"),") flag to ",(0,r.kt)("inlineCode",{parentName:"p"},"@hypermod/cli"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"codemod-cli --packages @mylib/button@14.0.0 --sequence project/path/to/src\n")),(0,r.kt)("p",null,"This time around, we use the provided version (14.0.0) as the start of a semver range between ",(0,r.kt)("inlineCode",{parentName:"p"},"14.0.0-@latest"),".\nWe then fetch all codemods that match and run them one after another."),(0,r.kt)("h2",{id:"running-local-transforms"},"Running local transforms"),(0,r.kt)("p",null,"For local transform files, not published to the community repo, you can supply your own transform the same way you would with jscodeshift."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"codemod-cli --transform path/to/transform.ts project/path/to/src\n")),(0,r.kt)("h2",{id:"parsing-typescript--flow"},"Parsing TypeScript & Flow"),(0,r.kt)("p",null,"By default ",(0,r.kt)("inlineCode",{parentName:"p"},"@hypermod/cli")," will use ",(0,r.kt)("inlineCode",{parentName:"p"},"babel")," as the default parser and only transform files with a ",(0,r.kt)("inlineCode",{parentName:"p"},".js")," extensions."),(0,r.kt)("p",null,"If your repo depends on flow or typescript, it's important to remember to specify ",(0,r.kt)("inlineCode",{parentName:"p"},"ts"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"tsx")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"flow")," as the ",(0,r.kt)("inlineCode",{parentName:"p"},"--parser")," and or ",(0,r.kt)("inlineCode",{parentName:"p"},"jsx, ts, tsx")," as ",(0,r.kt)("inlineCode",{parentName:"p"},"--extensions")," to make sure jscodeshift can interpret the files properly."),(0,r.kt)("p",null,"Please refer to the ",(0,r.kt)("a",{parentName:"p",href:"/docs/cli"},"@hypermod/cli API reference")," for more information."))}u.isMDXComponent=!0}}]);